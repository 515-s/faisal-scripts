--// تشغيل السكربت فقط داخل اللعبة
local CORRECT_PLACEID = 16993432698
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

if game.PlaceId ~= CORRECT_PLACEID then
	StarterGui:SetCore("SendNotification", {
		Title = "Not in the correct game";
		Text = "لست في اللعبة الصحيحة";
		Duration = 5;
	})
	return
end

--// تثبيت Parts عند الضغط على الزر
local function anchorParts(parent)
	for _, obj in ipairs(parent:GetDescendants()) do
		if obj:IsA("BasePart") and obj.Name == "Part" then
			obj.Anchored = true
			obj.CanCollide = true
		end
	end
end

local function enableAnchor()
	anchorParts(workspace)
	workspace.DescendantAdded:Connect(function(obj)
		if obj:IsA("BasePart") and obj.Name == "Part" then
			obj.Anchored = true
			obj.CanCollide = true
		elseif obj:IsA("Model") then
			anchorParts(obj)
		end
	end)
end

--// واجهة GUI
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "ASNO_UI"

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromOffset(200,26)
main.Position = UDim2.new(0.02,0,0.35,0)
main.BackgroundColor3 = Color3.fromRGB(15,15,15)
main.Active, main.Draggable = true, true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,10)

local top = Instance.new("Frame", main)
top.Size = UDim2.new(1,0,0,26)
top.BackgroundColor3 = Color3.fromRGB(25,25,25)
Instance.new("UICorner", top).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel", top)
title.Size = UDim2.new(1,0,1,0)
title.BackgroundTransparency = 1
title.Text = "ASNO"
title.TextColor3 = Color3.fromRGB(230,230,230)
title.TextSize = 12
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Center

local content = Instance.new("Frame", main)
content.Position = UDim2.new(0,0,0,26)
content.Size = UDim2.new(1,0,0,0)
content.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", content)
layout.Padding = UDim.new(0,5)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top

local arrow = Instance.new("TextButton", top)
arrow.Size = UDim2.fromOffset(26,26)
arrow.Position = UDim2.new(1,-26,0,0)
arrow.Text = "▼"
arrow.BackgroundTransparency = 1
arrow.TextSize = 12
arrow.Font = Enum.Font.GothamBold
arrow.TextColor3 = Color3.fromRGB(220,220,220)

local opened = true
local openSize = main.Size
local closeSize = UDim2.fromOffset(200,26)

arrow.MouseButton1Click:Connect(function()
	opened = not opened
	arrow.Text = opened and "▼" or "▲"
	content.Visible = opened
	TweenService:Create(main,TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{Size = opened and openSize or closeSize}):Play()
end)

local function updateMainHeight()
	local totalHeight = 26 + layout.AbsoluteContentSize.Y + 10
	main.Size = UDim2.fromOffset(200, totalHeight)
	openSize = main.Size
	closeSize = UDim2.fromOffset(200,26)
end

layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(updateMainHeight)
updateMainHeight()

--// زر التفعيل
local enableBtn = Instance.new("TextButton", content)
enableBtn.Size = UDim2.new(0,180,0,28)
enableBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
enableBtn.Text = "Enable Anchors"
enableBtn.TextColor3 = Color3.fromRGB(230,230,230)
enableBtn.TextSize = 12
enableBtn.Font = Enum.Font.GothamBold
Instance.new("UICorner", enableBtn).CornerRadius = UDim.new(0,6)

enableBtn.MouseButton1Click:Connect(function()
	enableBtn.Text = "Enabled ✓"
	enableBtn.BackgroundColor3 = Color3.fromRGB(0,120,0)
	enableAnchor()
end)

--// زر الإغلاق
local closeBtn = Instance.new("TextButton", top)
closeBtn.Size = UDim2.fromOffset(26,26)
closeBtn.Position = UDim2.new(1,-26,0,0)
closeBtn.Text = "X"
closeBtn.BackgroundTransparency = 1
closeBtn.TextColor3 = Color3.fromRGB(220,220,220)
closeBtn.Font = Enum.Font.GothamBold

closeBtn.MouseButton1Click:Connect(function()
	gui:Destroy()
end)
