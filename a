--// Services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

--// نسخ الاسم
local function copy(text)
	if setclipboard then
		setclipboard(text)
	end
end

--// تحويل لون RGB إلى اسم تقريبي بالعربي
local function colorNameFromColor3(color)
	local r,g,b = color.R*255, color.G*255, color.B*255
	if r > 200 and g < 50 and b < 50 then
		return "أحمر"
	elseif r < 50 and g > 200 and b < 50 then
		return "أخضر"
	elseif r < 50 and g < 50 and b > 200 then
		return "أزرق"
	elseif r > 200 and g > 200 and b < 50 then
		return "أصفر"
	elseif r > 200 and g > 200 and b > 200 then
		return "أبيض"
	elseif r < 50 and g < 50 and b < 50 then
		return "أسود"
	elseif r > 100 and g > 100 and b > 100 then
		return "رمادي"
	else
		return "غير معروف"
	end
end

--// إنشاء النص فوق البارت
local function setLabelOnPart(part, text)
	if not part or not part.Parent then return end
	local billboard = part:FindFirstChild("ColorLabelGui")
	if not billboard then
		billboard = Instance.new("BillboardGui")
		billboard.Name = "ColorLabelGui"
		billboard.Adornee = part
		billboard.Size = UDim2.new(0,150,0,50)
		billboard.StudsOffset = Vector3.new(0, part.Size.Y/2 + 2, 0)
		billboard.AlwaysOnTop = true
		billboard.Parent = part

		local label = Instance.new("TextLabel")
		label.Name = "ColorLabel"
		label.Size = UDim2.new(1,0,1,0)
		label.BackgroundTransparency = 1
		label.TextColor3 = Color3.fromRGB(255,255,255)
		label.TextScaled = true -- خلي النص كبير
		label.Font = Enum.Font.SourceSansBold
		label.Parent = billboard
	end

	billboard.ColorLabel.Text = text
	local lbl = billboard:FindFirstChild("ColorLabel")
	if lbl then
		lbl.Text = text
	end
end

--// إنشاء البارت الأساسي
local function createMarker(model)
	local main = model.PrimaryPart or model:FindFirstChildWhichIsA("BasePart")
	if not main then return nil end

	local part = Instance.new("Part")
	part.Size = Vector3.new(1,10,1) -- طول البارت 10
	part.Color = Color3.fromRGB(128,128,128)
	part.Material = Enum.Material.Neon
	part.CanCollide = false
	part.Anchored = false
	part.Name = "Marker"

	part.CFrame = main.CFrame * CFrame.new(0,20,0)

	local weld = Instance.new("WeldConstraint")
	weld.Part0 = part
	weld.Part1 = main
	weld.Parent = part

	local click = Instance.new("ClickDetector", part)
	click.MaxActivationDistance = 50
	click.MouseClick:Connect(function()
		copy(model.Name)
	end)

	part.Parent = model
	return part
end

--// فحص الموديلات وإنشاء البارت
local added = {}
local markers = {}

local function check(obj)
	if obj:IsA("Model") and #obj.Name > 20 and not added[obj] then
		added[obj] = true
		local part = createMarker(obj)
		if part then
			table.insert(markers, part)
		end
	end
end

for _,v in ipairs(Workspace:GetDescendants()) do
	check(v)
end

Workspace.DescendantAdded:Connect(check)

--// مراقبة لون البارت كل ثانية
spawn(function()
	while true do
		for _, part in ipairs(markers) do
			if part and part.Parent then
				local name = colorNameFromColor3(part.Color)
				setLabelOnPart(part, name)
			end
		end
		wait(1)
	end
end)
