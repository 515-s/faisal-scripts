--// Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local workspace = game:GetService("Workspace")

--// نسخ الاسم
local function copy(text)
	if setclipboard then
		setclipboard(text)
	end
end

--// بارت طويل + ضغط = نسخ الاسم
local function createMarker(model)
	local main = model.PrimaryPart or model:FindFirstChildWhichIsA("BasePart")
	if not main then return end

	local part = Instance.new("Part")
	part.Size = Vector3.new(1, 30, 1) -- عمود طويل
	part.Color = Color3.fromRGB(255,0,0)
	part.Material = Enum.Material.Neon
	part.CanCollide = false
	part.Anchored = false
	part.Name = "Marker"

	part.CFrame = main.CFrame * CFrame.new(0, 20, 0)

	-- ربط مع الموديل عشان يتحرك معه
	local weld = Instance.new("WeldConstraint")
	weld.Part0 = part
	weld.Part1 = main
	weld.Parent = part

	-- كشف الضغط لنسخ الاسم
	local click = Instance.new("ClickDetector", part)
	click.MaxActivationDistance = 50
	click.MouseClick:Connect(function()
		copy(model.Name)
	end)

	part.Parent = model
end

--// فحص الموديلات
local added = {}
local function check(obj)
	if obj:IsA("Model") and #obj.Name > 20 and not added[obj] then
		added[obj] = true
		createMarker(obj)
	end
end

-- فحص كل الموديلات الموجودة
for _,v in ipairs(workspace:GetDescendants()) do
	check(v)
end

-- مراقبة أي موديل جديد يضاف
workspace.DescendantAdded:Connect(check)
