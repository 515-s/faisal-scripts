--// Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer

--// UI بسيطة
local gui = Instance.new("ScreenGui", player.PlayerGui)

local scroll = Instance.new("ScrollingFrame", gui)
scroll.Size = UDim2.fromScale(0.35,0.5)
scroll.Position = UDim2.fromScale(0.03,0.25)
scroll.CanvasSize = UDim2.new(0,0,0,0)

local layout = Instance.new("UIListLayout", scroll)

--// نسخ
local function copy(text)
	if setclipboard then
		setclipboard(text)
	end
end

--// بارت طويل + ضغط = نسخ
local function createMarker(model)
	local main = model.PrimaryPart or model:FindFirstChildWhichIsA("BasePart")
	if not main then return end

	local part = Instance.new("Part")
	part.Size = Vector3.new(1, 30, 1) -- عمود طويل
	part.Color = Color3.fromRGB(255,0,0)
	part.Material = Enum.Material.Neon
	part.CanCollide = false
	part.Anchored = false
	part.Name = "Marker"

	part.CFrame = main.CFrame * CFrame.new(0, 20, 0)

	-- ربط مع الموديل عشان يتحرك معه
	local weld = Instance.new("WeldConstraint")
	weld.Part0 = part
	weld.Part1 = main
	weld.Parent = part

	-- كشف الضغط
	local click = Instance.new("ClickDetector", part)
	click.MaxActivationDistance = 50

	click.MouseClick:Connect(function()
		copy(model.Name)
	end)

	part.Parent = model
end

--// إضافة زر للقائمة
local function addItem(name)
	local btn = Instance.new("TextButton", scroll)
	btn.Size = UDim2.new(1,0,0,30)
	btn.Text = name .. " | Copy"

	btn.MouseButton1Click:Connect(function()
		copy(name)
	end)
end

layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scroll.CanvasSize = UDim2.new(0,0,0,layout.AbsoluteContentSize.Y)
end)

--// فحص
local added = {}

local function check(obj)
	if obj:IsA("Model") and #obj.Name > 20 and not added[obj] then
		added[obj] = true
		addItem(obj.Name)
		createMarker(obj)
	end
end

for _,v in ipairs(workspace:GetDescendants()) do
	check(v)
end

workspace.DescendantAdded:Connect(check)
