local Players = game:GetService("Players")
local VirtualInputManager = game:GetService("VirtualInputManager")

local player = Players.LocalPlayer

--================ GUI =================--

local gui = Instance.new("ScreenGui")
gui.ResetOnSpawn = false
gui.Name = "MiniMenu"
gui.Parent = player:WaitForChild("PlayerGui")

local main = Instance.new("Frame")
main.Size = UDim2.fromOffset(120,70) -- صغير جدا
main.Position = UDim2.fromScale(0.15,0.2)
main.BackgroundColor3 = Color3.fromRGB(15,15,15)
main.Active = true
main.Draggable = true
main.Parent = gui

Instance.new("UICorner", main).CornerRadius = UDim.new(0,10)

local layout = Instance.new("UIListLayout", main)
layout.Padding = UDim.new(0,5)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Center

--================ FUNCTIONS =================--

-- إحداثياتك
local CLICK_X = 960
local CLICK_Y = 874

local function clickAt(x,y)
	VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 0)
	VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 0)
end

--================ BUTTON 1 : SLAP =================--

local slapBtn = Instance.new("TextButton")
slapBtn.Size = UDim2.new(1,-10,0,25)
slapBtn.Text = "SLAP"
slapBtn.Font = Enum.Font.SourceSansBold
slapBtn.TextScaled = true
slapBtn.TextColor3 = Color3.new(1,1,1)
slapBtn.BackgroundColor3 = Color3.fromRGB(30,30,30)
slapBtn.Parent = main
Instance.new("UICorner", slapBtn)

slapBtn.MouseButton1Click:Connect(function()
	clickAt(CLICK_X, CLICK_Y)
end)

--================ BUTTON 2 : TOUCH TOGGLE =================--

local lastTouchPlayer = nil
local touchEnabled = false

-- تتبع آخر لاعب لمسّك
local char = player.Character or player.CharacterAdded:Wait()
local root = char:WaitForChild("HumanoidRootPart")

root.Touched:Connect(function(hit)
	local model = hit:FindFirstAncestorOfClass("Model")
	if model and game.Players:GetPlayerFromCharacter(model) then
		lastTouchPlayer = game.Players:GetPlayerFromCharacter(model)
	end
end)

touchBtn.MouseButton1Click:Connect(function()
	touchEnabled = not touchEnabled

	if touchEnabled and lastTouchPlayer then
		touchBtn.Text = "TOUCH: "..lastTouchPlayer.Name
	else
		touchBtn.Text = "TOUCH: OFF"
	end
end)
