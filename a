local Players = game:GetService("Players")

local lastTouchPlayer = nil

-- تتبع آخر لمس
local char = player.Character or player.CharacterAdded:Wait()
local root = char:WaitForChild("HumanoidRootPart")

root.Touched:Connect(function(hit)
	local model = hit:FindFirstAncestorOfClass("Model")
	local plr = Players:GetPlayerFromCharacter(model)
	if plr and plr ~= player then
		lastTouchPlayer = plr
	end
end)

-- فريم العرض
local infoFrame = Instance.new("Frame")
infoFrame.Size = UDim2.fromOffset(160,60)
infoFrame.Position = UDim2.fromScale(0.5,0.8)
infoFrame.AnchorPoint = Vector2.new(0.5,0.5)
infoFrame.BackgroundColor3 = Color3.fromRGB(0,0,0)
infoFrame.Visible = false
infoFrame.Parent = gui
Instance.new("UICorner", infoFrame)

local img = Instance.new("ImageLabel")
img.Size = UDim2.fromOffset(50,50)
img.Position = UDim2.fromOffset(5,5)
img.BackgroundTransparency = 1
img.Parent = infoFrame

local nameLabel = Instance.new("TextLabel")
nameLabel.Size = UDim2.new(1,-60,1,0)
nameLabel.Position = UDim2.fromOffset(60,0)
nameLabel.BackgroundTransparency = 1
nameLabel.TextColor3 = Color3.new(1,1,1)
nameLabel.Font = Enum.Font.SourceSansBold
nameLabel.TextScaled = true
nameLabel.Parent = infoFrame

-- زر TOUCH
touchBtn.MouseButton1Click:Connect(function()
	if not lastTouchPlayer then return end

	nameLabel.Text = lastTouchPlayer.Name
	img.Image = "https://www.roblox.com/headshot-thumbnail/image?userId="
		..lastTouchPlayer.UserId..
		"&width=150&height=150&format=png"

	infoFrame.Visible = true

	task.delay(3, function()
		infoFrame.Visible = false
	end)
end)
