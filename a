local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- ScreenGui overlay
local overlayGui = Instance.new("ScreenGui")
overlayGui.Name = "GUIOverlayDebugger"
overlayGui.ResetOnSpawn = false
overlayGui.Parent = player:WaitForChild("PlayerGui")

local function createOverlayLabel(guiObject)
	if not guiObject:IsA("GuiObject") then return end
	if guiObject == overlayGui then return end

	-- نص Label
	local label = Instance.new("TextLabel")
	label.BackgroundTransparency = 1
	label.TextColor3 = Color3.new(1,1,1) -- أبيض
	label.TextStrokeColor3 = Color3.new(0,0,0) -- إطار أسود
	label.TextStrokeTransparency = 0
	label.TextScaled = true
	label.Font = Enum.Font.SourceSansBold
	label.TextXAlignment = Enum.TextXAlignment.Center
	label.TextYAlignment = Enum.TextYAlignment.Center
	label.ZIndex = 999
	label.Parent = overlayGui

	local function update()
		if not guiObject.Parent then
			label:Destroy()
			return
		end
		if guiObject.Visible and guiObject.AbsoluteSize.X > 0 and guiObject.AbsoluteSize.Y > 0 then
			label.Position = UDim2.fromOffset(guiObject.AbsolutePosition.X, guiObject.AbsolutePosition.Y)
			label.Size = UDim2.fromOffset(guiObject.AbsoluteSize.X, 18)
			label.Text = guiObject:GetFullName()
			label.Visible = true
		else
			label.Visible = false
		end
	end

	-- حدث للتحديث المستمر
	guiObject:GetPropertyChangedSignal("AbsolutePosition"):Connect(update)
	guiObject:GetPropertyChangedSignal("AbsoluteSize"):Connect(update)
	guiObject:GetPropertyChangedSignal("Visible"):Connect(update)

	-- تحديث أول مرة
	update()
end

-- كل العناصر الحالية
for _,v in ipairs(player.PlayerGui:GetDescendants()) do
	createOverlayLabel(v)
end

-- العناصر الجديدة
player.PlayerGui.DescendantAdded:Connect(function(v)
	task.wait(0.05)
	createOverlayLabel(v)
end)
