--// ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ≥ŸÉÿ±ÿ®ÿ™ ÿ®ÿ≥ ÿØÿßÿÆŸÑ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©
if game.PlaceId ~= 131623223084840 then return end

--// Services
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local workspace = game:GetService("Workspace")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local UserInputService = game:GetService("UserInputService")

-- clipboard helper (ŸÖÿ™ŸàÿßŸÅŸÇ ŸÖÿπ ÿπÿØÿ© exploit)
local SetClipboard = setclipboard or toclipboard or (syn and syn.write_clipboard)

--// Webhook (ŸÉŸÖÿß ŸáŸà)
local WEBHOOK_URL = "https://discord.com/api/webhooks/1466552183444078706/KK4pLVoGu0K_NQPy8-0I47-pQvKTr27zMP-1-3LNYbhdN3Yr288aFXROAsMljtRFevgK"
local req = (syn and syn.request) or http_request or request or (fluxus and fluxus.request)
if req then
    task.spawn(function()
        local gameName = "Unknown"
        pcall(function() gameName = MarketplaceService:GetProductInfo(game.PlaceId).Name end)
        local displayName = player.DisplayName
        local username = "@" .. player.Name
        local userId = tostring(player.UserId)
        local accountAge = tostring(player.AccountAge) .. " Days"
        local timeNow = os.date("%I:%M %p")
        pcall(function()
            req({
                Url = WEBHOOK_URL,
                Method = "POST",
                Headers = {["Content-Type"] = "application/json"},
                Body = HttpService:JSONEncode({
                    username = "üìã ÿ™ŸÇÿ±Ÿäÿ± ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ¨ÿØŸäÿØ",
                    embeds = {{
                        description = "**Open script now !**",
                        color = 65280,
                        fields = {
                            {name = "Display Name", value = displayName, inline = true},
                            {name = "Username", value = username, inline = true},
                            {name = "User ID", value = userId, inline = false},
                            {name = "Account Age", value = accountAge, inline = false},
                            {name = "Game", value = gameName, inline = false},
                            {name = "Tik", value = displayName .. " ‚Ä¢ Rob: " .. username .. " " .. timeNow, inline = false}
                        },
                        timestamp = DateTime.now():ToIsoDate()
                    }}
                })
            })
        end)
    end)
end

--// Main GUI
local gui = Instance.new("ScreenGui")
gui.Name = "FaisalUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local topHeight = 26
local buttonHeight = 28
local isMobile = (UserInputService.TouchEnabled or UserInputService.GamepadEnabled) and not UserInputService.KeyboardEnabled
local mainWidth, mainHeight = isMobile and 100 or 200, isMobile and 150 or (topHeight + 2*(buttonHeight + 6))

local main = Instance.new("Frame", gui)
main.Size = UDim2.fromOffset(mainWidth, mainHeight)
main.Position = UDim2.new(0.02, 0, 0.35, 0)
main.BackgroundColor3 = Color3.fromRGB(15,15,15)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,10)

-- Top bar
local top = Instance.new("Frame", main)
top.Size = UDim2.new(1,0,0,topHeight)
top.BackgroundColor3 = Color3.fromRGB(25,25,25)
top.BorderSizePixel = 0
Instance.new("UICorner", top).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel", top)
title.Size = UDim2.new(1,-(topHeight+4),1,0) -- ŸÜÿ™ÿ±ŸÉ ŸÖÿ≥ÿßÿ≠ÿ© ŸÑÿµŸàÿ±ÿ© ÿßŸÑÿØŸäÿ≥ŸÉŸàÿ±ÿØ ÿπŸÑŸâ ÿßŸÑŸäÿ≥ÿßÿ±
title.Position = UDim2.new(0, (topHeight+4), 0, 0)
title.BackgroundTransparency = 1
title.Text = "faisal-script"
title.TextColor3 = Color3.fromRGB(230,230,230)
title.TextSize = 12
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.RichText = false

-- ========== Discord Image Button (ÿØÿßÿ¶ÿ±Ÿä) ==========
local DISCORD_LINK = "https://discord.gg/r54j6Y4M6h"

local discordBtn = Instance.new("ImageButton", top)
discordBtn.Size = UDim2.fromOffset(topHeight - 4, topHeight - 4) -- ŸÜŸÅÿ≥ ÿ≠ÿ¨ŸÖ ÿßŸÑÿ≤ÿ± ÿ™ŸÇÿ±Ÿäÿ®ÿß ŸÑŸÉŸÜ ÿ£ÿµÿ∫ÿ± ÿ¥ŸàŸäÿ©
discordBtn.Position = UDim2.new(0,4,0.5, -(topHeight-4)/2)
discordBtn.BackgroundTransparency = 0
discordBtn.BackgroundColor3 = Color3.fromRGB(35, 39, 43)
discordBtn.Image = "rbxassetid://13758883121" -- ŸÑŸà ÿπŸÜÿØŸÉ asset id ÿ£ŸÅÿ∂ŸÑÿå ÿ≠ÿ∑ŸëŸá ŸáŸÜÿß
discordBtn.ScaleType = Enum.ScaleType.Fit
local discordCorner = Instance.new("UICorner", discordBtn)
discordCorner.CornerRadius = UDim.new(1,0) -- ŸäÿÆŸÑŸäŸáÿß ÿØÿßÿ¶ÿ±Ÿäÿ©

-- Tooltip label ŸÅŸàŸÇ ÿßŸÑÿµŸàÿ±ÿ© (Ÿäÿ∏Ÿáÿ± ŸÑŸÖÿß ÿ™ŸÖÿ±ÿ± ÿßŸÑŸÅÿ£ÿ±ÿ©)
local tooltip = Instance.new("TextLabel", top)
tooltip.Size = UDim2.new(0,80,0,20)
tooltip.Position = UDim2.new(0,4,0, -22)
tooltip.BackgroundTransparency = 1
tooltip.TextColor3 = Color3.new(1,1,1)
tooltip.Font = Enum.Font.Gotham
tooltip.TextSize = 12
tooltip.Text = "Discord"
tooltip.Visible = false

discordBtn.MouseEnter:Connect(function()
    tooltip.Visible = true
end)
discordBtn.MouseLeave:Connect(function()
    tooltip.Visible = false
end)

discordBtn.MouseButton1Click:Connect(function()
    if SetClipboard then
        SetClipboard(DISCORD_LINK)
    end
end)

-- small X button ÿπŸÑŸâ ÿßŸÑŸäŸÖŸäŸÜ ÿπŸÑÿ¥ÿßŸÜ ÿ™ÿÆŸÅŸä/ÿ™ÿ≥ÿ™ÿ±ÿ¨ÿπ ÿßŸÑÿ≤ÿ±
local hideBtn = Instance.new("TextButton", top)
hideBtn.Size = UDim2.fromOffset(16,16)
hideBtn.Position = UDim2.new(1, -(16+4), 0.5, -8)
hideBtn.Text = "‚úï"
hideBtn.BackgroundTransparency = 0
hideBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
hideBtn.TextColor3 = Color3.new(1,1,1)
hideBtn.Font = Enum.Font.Gotham
hideBtn.TextSize = 12
Instance.new("UICorner", hideBtn).CornerRadius = UDim.new(0,4)

local restoreBtn = Instance.new("TextButton", top)
restoreBtn.Size = UDim2.fromOffset(16,16)
restoreBtn.Position = UDim2.new(1, -(16+4+20), 0.5, -8)
restoreBtn.Text = "‚Ü∫"
restoreBtn.BackgroundTransparency = 0
restoreBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
restoreBtn.TextColor3 = Color3.new(1,1,1)
restoreBtn.Font = Enum.Font.Gotham
restoreBtn.TextSize = 12
Instance.new("UICorner", restoreBtn).CornerRadius = UDim.new(0,4)
restoreBtn.Visible = false

hideBtn.MouseButton1Click:Connect(function()
    discordBtn.Visible = false
    tooltip.Visible = false
    hideBtn.Visible = false
    restoreBtn.Visible = true
end)

restoreBtn.MouseButton1Click:Connect(function()
    discordBtn.Visible = true
    hideBtn.Visible = true
    restoreBtn.Visible = false
end)

-- ========== Content (Buttons) ==========
local content = Instance.new("Frame", main)
content.Position = UDim2.new(0,0,0,topHeight)
content.Size = UDim2.new(1,0,1,-topHeight)
content.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", content)
layout.Padding = UDim.new(0,5)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top

local function makeButton(text)
    local b = Instance.new("TextButton", content)
    b.Size = UDim2.new(0, mainWidth-10, 0, buttonHeight)
    b.BackgroundColor3 = Color3.fromRGB(50,50,50)
    b.Text = text
    b.TextColor3 = Color3.fromRGB(230,230,230)
    b.Font = Enum.Font.GothamBold
    b.TextSize = 11
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,6)
    return b
end

local instantBtn = makeButton("Instant Take")
instantBtn.MouseButton1Click:Connect(function()
    for _,v in ipairs(workspace:GetDescendants()) do
        if v:IsA("ProximityPrompt") then
            v.HoldDuration = 0
        end
    end
end)

local refreshBtn = makeButton("ESP+Refresh")

-- ========== Blocks list (complete for Natural, Event, Global) ==========
local orderedBlocks = {
    -- Natural
    {model = "NaturalLuckyBlock_Common", color = Color3.fromRGB(200,200,200)},
    {model = "NaturalLuckyBlock_Uncommon", color = Color3.fromRGB(0,255,0)},
    {model = "NaturalLuckyBlock_Rare", color = Color3.fromRGB(0,150,255)},
    {model = "NaturalLuckyBlock_Epic", color = Color3.fromRGB(128,0,128)},
    {model = "NaturalLuckyBlock_Legendary", color = Color3.fromRGB(255,255,0)},
    {model = "NaturalLuckyBlock_Mythical", color = Color3.fromRGB(128,0,128)},
    {model = "NaturalLuckyBlock_Cosmic", color = Color3.fromRGB(0,0,0)},
    {model = "NaturalLuckyBlock_Secret", color = Color3.fromRGB(255,0,0)},
    {model = "NaturalLuckyBlock_UFO", color = Color3.fromRGB(0,255,127)},
    {model = "NaturalLuckyBlock_Money", color = Color3.fromRGB(200,255,0)},
    {model = "NaturalLuckyBlock_Radioactive", color = Color3.fromRGB(57,255,20)},
    {model = "NaturalLuckyBlock_Admin", color = "RAINBOW"},
    {model = "NaturalLuckyBlock_Divine", color = Color3.fromRGB(255,255,0)},

    -- Event
    {model = "EventLuckyBlock_Common", color = Color3.fromRGB(180,180,180)},
    {model = "EventLuckyBlock_Uncommon", color = Color3.fromRGB(0,200,0)},
    {model = "EventLuckyBlock_Rare", color = Color3.fromRGB(0,120,255)},
    {model = "EventLuckyBlock_Epic", color = Color3.fromRGB(150,0,200)},
    {model = "EventLuckyBlock_Legendary", color = Color3.fromRGB(255,230,0)},
    {model = "EventLuckyBlock_Mythical", color = Color3.fromRGB(128,0,128)},
    {model = "EventLuckyBlock_Cosmic", color = Color3.fromRGB(40,40,40)},
    {model = "EventLuckyBlock_Secret", color = Color3.fromRGB(255,50,50)},
    {model = "EventLuckyBlock_Celestial", color = Color3.fromRGB(0,200,255)},
    {model = "EventLuckyBlock_UFO", color = Color3.fromRGB(0,255,127)},
    {model = "EventLuckyBlock_Money", color = Color3.fromRGB(200,255,0)},
    {model = "EventLuckyBlock_Radioactive", color = Color3.fromRGB(57,255,20)},
    {model = "EventLuckyBlock_Admin", color = "RAINBOW"},
    {model = "EventLuckyBlock_Divine", color = Color3.fromRGB(255,255,0)},

    -- Global
    {model = "GlobalLuckyBlock_Common", color = Color3.fromRGB(160,160,160)},
    {model = "GlobalLuckyBlock_Uncommon", color = Color3.fromRGB(0,255,120)},
    {model = "GlobalLuckyBlock_Rare", color = Color3.fromRGB(0,170,255)},
    {model = "GlobalLuckyBlock_Epic", color = Color3.fromRGB(180,0,255)},
    {model = "GlobalLuckyBlock_Legendary", color = Color3.fromRGB(255,200,0)},
    {model = "GlobalLuckyBlock_Mythical", color = Color3.fromRGB(128,0,128)},
    {model = "GlobalLuckyBlock_Cosmic", color = Color3.fromRGB(70,70,70)},
    {model = "GlobalLuckyBlock_Secret", color = Color3.fromRGB(255,80,80)},
    {model = "GlobalLuckyBlock_Money", color = Color3.fromRGB(200,255,0)},
    {model = "GlobalLuckyBlock_Radioactive", color = Color3.fromRGB(57,255,20)},
    {model = "GlobalLuckyBlock_Admin", color = "RAINBOW"},
    {model = "GlobalLuckyBlock_UFO", color = Color3.fromRGB(0,255,127)},
    {model = "GlobalLuckyBlock_Divine", color = Color3.fromRGB(255,255,0)},
}

-- helper maps: ÿßÿ≥ŸÖ ÿßŸÑŸÜŸàÿπ ÿßŸÑŸÑŸä ŸÜÿπÿ±ÿ∂Ÿá ŸàŸÜÿµ ÿßŸÑŸÑŸàŸÜ ÿ≠ÿ≥ÿ® ÿßŸÑŸÜŸàÿπ
local function getLabelAndTextColorFromModelName(modelName)
    local nameLower = modelName:lower()
    -- Priority checks
    if nameLower:find("mythical") then return "Mythical", Color3.fromRGB(160,0,255) end
    if nameLower:find("divine") then return "Divine", Color3.fromRGB(255,255,80) end
    if nameLower:find("radioactive") then return "Radioactive", Color3.fromRGB(57,255,20) end
    if nameLower:find("money") then return "Money", Color3.fromRGB(200,255,0) end
    if nameLower:find("admin") then return "Admin", Color3.fromRGB(255,255,255) end -- admin will be rainbow-text animated
    if nameLower:find("ufo") then return "UFO", Color3.fromRGB(0,255,127) end
    if nameLower:find("legendary") then return "Legendary", Color3.fromRGB(255,215,0) end
    if nameLower:find("epic") then return "Epic", Color3.fromRGB(180,0,255) end
    if nameLower:find("rare") then return "Rare", Color3.fromRGB(0,150,255) end
    if nameLower:find("uncommon") then return "Uncommon", Color3.fromRGB(0,200,0) end
    if nameLower:find("common") then return "Common", Color3.fromRGB(200,200,200) end
    if nameLower:find("secret") then return "Secret", Color3.fromRGB(255,50,50) end
    if nameLower:find("cosmic") then return "Cosmic", Color3.fromRGB(70,70,70) end
    -- default fallback
    return modelName, Color3.fromRGB(255,255,255)
end

-- tables to avoid duplicates
local highlightedModels = {}
local namesAdded = {}

-- rainbow helper for adorns or text
local function startRainbowLoop(obj, prop)
    -- prop = "Color3" for adorn, or "TextColor3" for label
    task.spawn(function()
        local i = 0
        while obj and obj.Parent do
            local hue = (tick() % 2) / 2 -- cycles
            obj[prop] = Color3.fromHSV(hue, 1, 1)
            task.wait(0.06)
        end
    end)
end

-- highlight + name function
local function highlightModel(model, color)
    if highlightedModels[model] then return end
    highlightedModels[model] = true

    -- get label & text color
    local labelText, textColor = getLabelAndTextColorFromModelName(model.Name)

    -- add Billboard (only once per model)
    if not namesAdded[model] then
        local primaryPart = model.PrimaryPart or model:FindFirstChildWhichIsA("BasePart")
        if primaryPart then
            local bill = Instance.new("BillboardGui")
            bill.Name = "FaisalName"
            bill.Adornee = primaryPart
            bill.Size = UDim2.new(0,120,0,22)
            bill.StudsOffset = Vector3.new(0, 3.5, 0)
            bill.AlwaysOnTop = true
            bill.Parent = model

            local txt = Instance.new("TextLabel", bill)
            txt.Size = UDim2.new(1,0,1,0)
            txt.BackgroundTransparency = 1
            txt.Text = labelText -- ŸÅŸÇÿ∑ ÿßŸÑŸÜŸàÿπ
            txt.TextScaled = true
            txt.Font = Enum.Font.GothamBold
            txt.TextColor3 = textColor
            -- rainbow admin text
            if labelText == "Admin" then
                task.spawn(function()
                    while txt.Parent do
                        for h=0,1,0.02 do
                            txt.TextColor3 = Color3.fromHSV(h,1,1)
                            task.wait(0.03)
                        end
                    end
                end)
            end
            namesAdded[model] = true
        end
    end

    -- add adorns to parts
    for _, part in pairs(model:GetDescendants()) do
        if part:IsA("BasePart") then
            -- remove old adornments & billboards attached to parts only (safety)
            for _, child in pairs(part:GetChildren()) do
                if child:IsA("BoxHandleAdornment") then child:Destroy() end
            end

            local adorn = Instance.new("BoxHandleAdornment")
            adorn.Adornee = part
            adorn.AlwaysOnTop = true
            adorn.ZIndex = 10
            adorn.Size = part.Size
            adorn.Transparency = 0.3
            if color == "RAINBOW" then
                adorn.Color3 = Color3.fromRGB(255,255,255)
                startRainbowLoop(adorn, "Color3")
            else
                adorn.Color3 = color
            end
            adorn.Parent = part
        end
    end
end

-- initial refresh function (runs once + on button)
local function refreshAll()
    namesAdded = {}
    highlightedModels = {}
    for _, block in ipairs(orderedBlocks) do
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("Model") and obj.Name == block.model then
                highlightModel(obj, block.color)
            end
        end
    end
end

-- wire refresh button
refreshBtn.MouseButton1Click:Connect(function()
    refreshAll()
end)

-- auto-run on start
refreshAll()

-- keep applying to newly added blocks
workspace.DescendantAdded:Connect(function(desc)
    -- small delay to allow model to set PrimaryPart etc.
    task.wait(0.1)
    for _, block in ipairs(orderedBlocks) do
        if desc:IsA("Model") and desc.Name == block.model then
            highlightModel(desc, block.color)
        elseif desc:IsA("BasePart") and desc.Parent and desc.Parent:IsA("Model") then
            local m = desc.Parent
            for _, block2 in ipairs(orderedBlocks) do
                if m.Name == block2.model then
                    highlightModel(m, block2.color)
                end
            end
        end
    end
end)

-- adapt for mobile sizing
if isMobile then
    local padding = 5
    local totalHeight = 0
    for _, btn in pairs(content:GetChildren()) do
        if btn:IsA("TextButton") then
            totalHeight = totalHeight + btn.Size.Y.Offset + padding
        end
    end
    main.Size = UDim2.fromOffset(mainWidth, topHeight + totalHeight)
end

-- end of script
