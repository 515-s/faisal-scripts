--// Faisal Script UI + Lucky Blocks ESP + Auto Update
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local workspace = game:GetService("Workspace")

-- GUI
local gui = Instance.new("ScreenGui")
gui.Name = "FaisalUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local topHeight = 26
local buttonHeight = 28
local padding = 6

-- ترتيب الأزرار + ألوان مخصصة
local orderedBlocks = {
	{name = "common lucky block", model = "NaturalLuckyBlock_Common", color = Color3.fromRGB(200,200,200)}, -- رمادي فاتح
	{name = "uncommon lucky block", model = "NaturalLuckyBlock_Uncommon", color = Color3.fromRGB(0,255,0)}, -- أخضر
	{name = "epic lucky block", model = "NaturalLuckyBlock_Epic", color = Color3.fromRGB(128,0,128)}, -- بنفسجي
	{name = "legendary lucky block", model = "NaturalLuckyBlock_Legendary", color = Color3.fromRGB(255,255,0)}, -- أصفر
	{name = "mythical lucky block", model = "NaturalLuckyBlock_Mythical", color = Color3.fromRGB(255,215,0)}, -- ذهبي
	{name = "cosmic lucky block", model = "NaturalLuckyBlock_Cosmic", color = Color3.fromRGB(0,0,0)}, -- أسود
	{name = "secret lucky block", model = "NaturalLuckyBlock_Secret", color = Color3.fromRGB(255,0,0)} -- أحمر
}

local totalButtons = #orderedBlocks
local mainHeight = topHeight + totalButtons*(buttonHeight + padding) + 20 -- زيادة الحجم شوي

local main = Instance.new("Frame")
main.Parent = gui
main.Size = UDim2.fromOffset(200, mainHeight) -- عرض أكبر شوي
main.Position = UDim2.new(0.02,0,0.35,0)
main.BackgroundColor3 = Color3.fromRGB(15,15,15)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,10)

-- Top Bar
local top = Instance.new("Frame", main)
top.Size = UDim2.new(1,0,0,topHeight)
top.BackgroundColor3 = Color3.fromRGB(25,25,25)
top.BorderSizePixel = 0
Instance.new("UICorner", top).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel", top)
title.Size = UDim2.new(1,0,1,0)
title.BackgroundTransparency = 1
title.Text = "faisal-script"
title.TextColor3 = Color3.fromRGB(230,230,230)
title.TextSize = 12
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Center

local arrow = Instance.new("TextButton", top)
arrow.Size = UDim2.fromOffset(topHeight,topHeight)
arrow.Position = UDim2.new(1,-topHeight,0,0)
arrow.Text = "▼"
arrow.TextSize = 12
arrow.Font = Enum.Font.GothamBold
arrow.TextColor3 = Color3.fromRGB(220,220,220)
arrow.BackgroundTransparency = 1

-- Content
local content = Instance.new("Frame", main)
content.Position = UDim2.new(0,0,0,topHeight)
content.Size = UDim2.new(1,0,1, -topHeight)
content.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", content)
layout.Padding = UDim.new(0,padding)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top

-- Toggle
local opened = true
local openSize = main.Size
local closeSize = UDim2.fromOffset(200,topHeight)

local function toggle()
	opened = not opened
	arrow.Text = opened and "▼" or "▲"
	content.Visible = opened
	TweenService:Create(main,TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),
		{Size = opened and openSize or closeSize}):Play()
end
arrow.MouseButton1Click:Connect(toggle)

-- Function to highlight models using BoxHandleAdornment (ESP حقيقي)
local function highlightModel(model, color, rarityName)
	for _, part in pairs(model:GetDescendants()) do
		if part:IsA("BasePart") then
			-- إزالة أي BoxHandleAdornment قديمة
			for _, child in pairs(part:GetChildren()) do
				if child:IsA("BoxHandleAdornment") or child:IsA("BillboardGui") then
					child:Destroy()
				end
			end
			-- إنشاء BoxHandleAdornment
			local adorn = Instance.new("BoxHandleAdornment")
			adorn.Adornee = part
			adorn.AlwaysOnTop = true
			adorn.ZIndex = 10
			adorn.Size = part.Size
			adorn.Color3 = color
			adorn.Transparency = 0.3
			adorn.Parent = part

			-- اسم النُدرة فوق البوكس
			local bgui = Instance.new("BillboardGui")
			bgui.Adornee = part
			bgui.Size = UDim2.new(0,100,0,20)
			bgui.StudsOffset = Vector3.new(0, part.Size.Y/2 + 0.5, 0)
			bgui.AlwaysOnTop = true
			bgui.Parent = part

			local label = Instance.new("TextLabel", bgui)
			label.Size = UDim2.new(1,0,1,0)
			label.BackgroundTransparency = 1
			label.Text = rarityName
			label.TextColor3 = color
			label.TextSize = 12
			label.Font = Enum.Font.GothamBold
			label.TextStrokeTransparency = 0.5
			label.TextScaled = true
		end
	end
end

-- Create Buttons
for _, block in ipairs(orderedBlocks) do
	local btn = Instance.new("TextButton")
	btn.Parent = content
	btn.Size = UDim2.new(1,-12,0,buttonHeight)
	btn.BackgroundColor3 = Color3.fromRGB(30,30,30)
	btn.Text = block.name
	btn.TextColor3 = Color3.fromRGB(230,230,230)
	btn.TextSize = 11
	btn.Font = Enum.Font.Gotham
	btn.BorderSizePixel = 0
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)

	btn.MouseButton1Click:Connect(function()
		for _, obj in pairs(workspace:GetDescendants()) do
			if obj:IsA("Model") and obj.Name == block.model then
				highlightModel(obj, block.color, block.name)
			end
		end
		print(block.name .. " highlighted!")
	end)
end

-- تحديث تلقائي كل 5 ثواني
task.spawn(function()
	while true do
		task.wait(5)
		for _, block in ipairs(orderedBlocks) do
			for _, obj in pairs(workspace:GetDescendants()) do
				if obj:IsA("Model") and obj.Name == block.model then
					highlightModel(obj, block.color, block.name)
				end
			end
		end
	end
end)
