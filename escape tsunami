--// تشغيل السكربت فقط داخل التجربة المحددة
if game.PlaceId ~= 131623223084840 then return end

--// Services
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local workspace = game:GetService("Workspace")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local UserInputService = game:GetService("UserInputService")
local GuiService = game:GetService("GuiService")

--// Webhook (اختياري)
local WEBHOOK_URL = "https://discord.com/api/webhooks/1466552183444078706/KK4pLVoGu0K_NQPy8-0I47-pQvKTr27zMP-1-3LNYbhdN3Yr288aFXROAsMljtRFevgK"

--// Main GUI
local gui = Instance.new("ScreenGui")
gui.Name = "FaisalUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local topHeight = 26
local buttonHeight = 28
local mainWidth = 200
local mainHeight = topHeight + 2*(buttonHeight + 6)

local main = Instance.new("Frame")
main.Parent = gui
main.Size = UDim2.fromOffset(mainWidth, mainHeight)
main.Position = UDim2.new(0.02,0,0.35,0)
main.BackgroundColor3 = Color3.fromRGB(15,15,15)
main.BorderSizePixel = 0
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,10)

--// Top bar
local top = Instance.new("Frame", main)
top.Size = UDim2.new(1,0,0,topHeight)
top.BackgroundColor3 = Color3.fromRGB(25,25,25)
top.BorderSizePixel = 0
Instance.new("UICorner", top).CornerRadius = UDim.new(0,10)

local title = Instance.new("TextLabel", top)
title.Size = UDim2.new(1,0,1,0)
title.BackgroundTransparency = 1
title.Text = "faisal-script"
title.TextColor3 = Color3.fromRGB(230,230,230)
title.TextSize = 12
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Center

--// Discord button
local discordBtn = Instance.new("TextButton", top)
discordBtn.Size = UDim2.fromOffset(topHeight, topHeight)
discordBtn.Position = UDim2.new(0,0,0,0)
discordBtn.Text = "Discord"
discordBtn.TextSize = 10
discordBtn.Font = Enum.Font.GothamBold
discordBtn.BackgroundColor3 = Color3.fromRGB(100,100,255)
discordBtn.TextColor3 = Color3.fromRGB(255,255,255)
Instance.new("UICorner", discordBtn).CornerRadius = UDim.new(0,4)
discordBtn.MouseButton1Click:Connect(function()
    if setclipboard then setclipboard("https://discord.gg/r54j6Y4M6h") end
end)

--// Arrow toggle
local arrow = Instance.new("TextButton", top)
arrow.Size = UDim2.fromOffset(topHeight,topHeight)
arrow.Position = UDim2.new(1,-topHeight,0,0)
arrow.Text = "▼"
arrow.BackgroundTransparency = 1
arrow.TextSize = 12
arrow.Font = Enum.Font.GothamBold
arrow.TextColor3 = Color3.fromRGB(220,220,220)

local content = Instance.new("Frame", main)
content.Position = UDim2.new(0,0,0,topHeight)
content.Size = UDim2.new(1,0,1,-topHeight)
content.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", content)
layout.Padding = UDim.new(0,5)
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center
layout.VerticalAlignment = Enum.VerticalAlignment.Top

local opened = true
local openSize = main.Size
local closeSize = UDim2.fromOffset(mainWidth,topHeight)
arrow.MouseButton1Click:Connect(function()
    opened = not opened
    arrow.Text = opened and "▼" or "▲"
    content.Visible = opened
    TweenService:Create(main,TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{Size = opened and openSize or closeSize}):Play()
end)

--// Buttons
local instantBtn = Instance.new("TextButton", content)
instantBtn.Size = UDim2.new(0, mainWidth-10, 0, buttonHeight)
instantBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
instantBtn.Text = "Instant Take"
instantBtn.TextColor3 = Color3.fromRGB(230,230,230)
instantBtn.TextSize = 11
instantBtn.Font = Enum.Font.GothamBold
instantBtn.BorderSizePixel = 0
Instance.new("UICorner", instantBtn).CornerRadius = UDim.new(0,6)

local refreshBtn = Instance.new("TextButton", content)
refreshBtn.Size = UDim2.new(0, mainWidth-10, 0, buttonHeight)
refreshBtn.BackgroundColor3 = Color3.fromRGB(50,50,50)
refreshBtn.Text = "ESP+Refresh"
refreshBtn.TextColor3 = Color3.fromRGB(230,230,230)
refreshBtn.TextSize = 11
refreshBtn.Font = Enum.Font.GothamBold
refreshBtn.BorderSizePixel = 0
Instance.new("UICorner", refreshBtn).CornerRadius = UDim.new(0,6)

--// Blocks
local orderedBlocks = {
    {model="NaturalLuckyBlock_Common", color=Color3.fromRGB(200,200,200)},
    {model="NaturalLuckyBlock_Uncommon", color=Color3.fromRGB(0,255,0)},
    {model="NaturalLuckyBlock_Rare", color=Color3.fromRGB(0,150,255)},
    {model="NaturalLuckyBlock_Epic", color=Color3.fromRGB(128,0,128)},
    {model="NaturalLuckyBlock_Legendary", color=Color3.fromRGB(255,255,0)},
    {model="NaturalLuckyBlock_Mythical", color=Color3.fromRGB(128,0,128)},
    {model="NaturalLuckyBlock_Cosmic", color=Color3.fromRGB(0,0,0)},
    {model="NaturalLuckyBlock_Secret", color=Color3.fromRGB(255,0,0)},
    {model="NaturalLuckyBlock_UFO", color=Color3.fromRGB(0,255,127)},
    {model="NaturalLuckyBlock_Money", color=Color3.fromRGB(255,255,0)},
    {model="NaturalLuckyBlock_Radioactive", color=Color3.fromRGB(0,255,0)},
    {model="NaturalLuckyBlock_Admin", color=Color3.fromRGB(255,0,255)},
    {model="NaturalLuckyBlock_Divine", color=Color3.fromRGB(255,255,0)},
}

local highlightedModels = {}
local blockNamesAdded = {}
for _, block in ipairs(orderedBlocks) do highlightedModels[block.model] = {} end

--// Highlight function
local function highlightModel(model,color)
    if highlightedModels[model.Name][model] then return end
    highlightedModels[model.Name][model] = true
    for _, part in pairs(model:GetDescendants()) do
        if part:IsA("BasePart") then
            for _, child in pairs(part:GetChildren()) do
                if child:IsA("BoxHandleAdornment") or child:IsA("BillboardGui") then child:Destroy() end
            end
            local adorn = Instance.new("BoxHandleAdornment")
            adorn.Adornee = part
            adorn.AlwaysOnTop = true
            adorn.ZIndex = 10
            adorn.Size = part.Size
            adorn.Transparency = 0.3
            adorn.Color3 = color
            adorn.Parent = part
            -- Billboard name
            if not blockNamesAdded[model] then
                local billboard = Instance.new("BillboardGui")
                billboard.Adornee = part
                billboard.Size = UDim2.new(0,100,0,20)
                billboard.AlwaysOnTop = true
                local textLabel = Instance.new("TextLabel", billboard)
                textLabel.Size = UDim2.new(1,0,1,0)
                textLabel.BackgroundTransparency = 1
                textLabel.TextColor3 = color
                textLabel.Font = Enum.Font.GothamBold
                textLabel.TextSize = 12
                textLabel.Text = model.Name:gsub("NaturalLuckyBlock_","")
                billboard.Parent = part
                blockNamesAdded[model] = true
            end
        end
    end
end

--// ProximityPrompt instant & Unlock Zoom
local function activateAllPrompts()
    for _, v in ipairs(workspace:GetDescendants()) do
        if v:IsA("ProximityPrompt") then
            v.HoldDuration = 0
        end
    end
end

-- Unlock Zoom settings
player.CameraMaxZoomDistance = 500
player.CameraMinZoomDistance = 0
player.DevCameraOcclusionMode = Enum.DevCameraOcclusionMode.Invisicam
player:GetPropertyChangedSignal("CameraMaxZoomDistance"):Connect(function() player.CameraMaxZoomDistance = 500 end)
player:GetPropertyChangedSignal("CameraMinZoomDistance"):Connect(function() player.CameraMinZoomDistance = 0 end)
player:GetPropertyChangedSignal("DevCameraOcclusionMode"):Connect(function() player.DevCameraOcclusionMode = Enum.DevCameraOcclusionMode.Invisicam end)

--// Activate on start
activateAllPrompts()

-- Notifications
local function notify(title,desc)
    local notif = Instance.new("TextLabel", player.PlayerGui)
    notif.Size = UDim2.new(0,150,0,30)
    notif.Position = UDim2.new(0,5,1,-40)
    notif.BackgroundColor3 = Color3.fromRGB(50,50,50)
    notif.TextColor3 = Color3.fromRGB(255,255,255)
    notif.Font = Enum.Font.GothamBold
    notif.TextSize = 12
    notif.Text = title .. " - " .. desc .. " ✔"
    notif.TextWrapped = true
    Instance.new("UICorner", notif).CornerRadius = UDim.new(0,4)
    delay(5,function() notif:Destroy() end)
end
notify("Unlock Zoom","Active")
notify("Instant Take","Active")

-- Refresh button functionality
refreshBtn.MouseButton1Click:Connect(function()
    blockNamesAdded = {}
    for _, block in ipairs(orderedBlocks) do
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("Model") and obj.Name == block.model then
                highlightModel(obj, block.color)
            end
        end
    end
    activateAllPrompts()
end)

-- Instant Take button functionality
instantBtn.MouseButton1Click:Connect(function()
    activateAllPrompts()
end)
