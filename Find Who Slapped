-- LocalScript داخل StarterPlayerScripts

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local RunService = game:GetService("RunService")

-- إنشاء البارت الخاوي (فقط مكانه)
local part = Instance.new("Part")
part.Name = "CameraPart"
part.Size = Vector3.new(2,2,1)
part.Anchored = true
part.CanCollide = false
part.Transparency = 1 -- خاوي، ما يبين
part.Parent = workspace

-- إنشاء GUI فارغ
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CameraControlGUI"
screenGui.Parent = player:WaitForChild("PlayerGui")

local frame = Instance.new("Frame")
frame.Size = UDim2.new(0,200,0,100)
frame.Position = UDim2.new(0,10,0,10)
frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
frame.Visible = true -- تقدر تخليه false إذا تبغاه مخفي أولًا
frame.Parent = screenGui

-- زر لتفعيل/إيقاف تثبيت الكاميرا
local cameraButton = Instance.new("TextButton")
cameraButton.Size = UDim2.new(0,180,0,40)
cameraButton.Position = UDim2.new(0,10,0,10)
cameraButton.Text = "تفعيل الكاميرا"
cameraButton.Parent = frame

local cameraEnabled = false

cameraButton.MouseButton1Click:Connect(function()
	cameraEnabled = not cameraEnabled
	if cameraEnabled then
		cameraButton.Text = "إيقاف الكاميرا"
	else
		cameraButton.Text = "تفعيل الكاميرا"
		camera.CameraType = Enum.CameraType.Custom -- يرجع التحكم العادي
	end
end)

-- تحديث البارت والكاميرا كل فريم (لو مفعل)
RunService.RenderStepped:Connect(function()
	if cameraEnabled then
		local char = player.Character
		if char and char:FindFirstChild("HumanoidRootPart") then
			local hrp = char.HumanoidRootPart
			-- موقع البارت 15 قدام و5 فوق
			part.Position = hrp.Position + hrp.CFrame.LookVector * 15 + Vector3.new(0,5,0)
			camera.CameraType = Enum.CameraType.Scriptable
			camera.CameraSubject = nil
			camera.CFrame = CFrame.new(part.Position, hrp.Position)
		end
	end
end)
